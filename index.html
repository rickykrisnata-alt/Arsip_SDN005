<!DOCTYPE html>
<html lang="id" x-data="{ sidebarOpen: false, currentPage: 'dashboard', userRole: 'user' }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Kearsipan Surat - SDN 005</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="assets/js/app.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        .sidebar-transition { transition: transform 0.3s ease-in-out; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hover-scale { transition: transform 0.2s; }
        .hover-scale:hover { transform: scale(1.02); }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-40">
        <div class="px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <button @click="sidebarOpen = !sidebarOpen" class="p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 lg:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div class="flex-shrink-0 flex items-center ml-4 lg:ml-0">
                        <i class="fas fa-school text-blue-600 text-2xl mr-3"></i>
                        <div>
                            <h1 class="text-xl font-bold text-gray-900">Sistem Kearsipan Surat</h1>
                            <p class="text-xs text-gray-500">SDN 005</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative" x-data="{ notificationOpen: false }">
                        <button @click="notificationOpen = !notificationOpen" class="p-2 rounded-full text-gray-600 hover:text-gray-900 hover:bg-gray-100 relative">
                            <i class="fas fa-bell text-lg"></i>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400"></span>
                        </button>
                        <div x-show="notificationOpen" @click.away="notificationOpen = false" x-cloak
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100"
                             class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-sm font-medium text-gray-900">Notifikasi</h3>
                            </div>
                            <div class="max-h-64 overflow-y-auto">
                                <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100">
                                    <p class="text-sm text-gray-900">Surat masuk baru dari Dinas Pendidikan</p>
                                    <p class="text-xs text-gray-500 mt-1">2 jam yang lalu</p>
                                </div>
                                <div class="p-3 hover:bg-gray-50 cursor-pointer">
                                    <p class="text-sm text-gray-900">Template surat baru ditambahkan</p>
                                    <p class="text-xs text-gray-500 mt-1">1 hari yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="relative" x-data="{ profileOpen: false }">
                        <button @click="profileOpen = !profileOpen" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm font-medium" x-text="userRole === 'admin' ? 'A' : userRole === 'pimpinan' ? 'P' : 'U'"></span>
                            </div>
                            <span class="hidden md:block text-sm font-medium text-gray-700" x-text="userRole === 'admin' ? 'Admin' : userRole === 'pimpinan' ? 'Pimpinan' : 'User'"></span>
                            <i class="fas fa-chevron-down text-xs text-gray-500"></i>
                        </button>
                        <div x-show="profileOpen" @click.away="profileOpen = false" x-cloak
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100"
                             class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="fas fa-user mr-2"></i> Profil
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="fas fa-cog mr-2"></i> Pengaturan
                            </a>
                            <hr class="my-1">
                            <a href="#" @click="logout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                <i class="fas fa-sign-out-alt mr-2"></i> Keluar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside x-show="sidebarOpen" 
           x-cloak
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 transform -translate-x-full"
           x-transition:enter-end="opacity-100 transform translate-x-0"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100 transform translate-x-0"
           x-transition:leave-end="opacity-0 transform -translate-x-full"
           class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl border-r border-gray-200 lg:hidden"
           @click.away="sidebarOpen = false">
        <div class="flex flex-col h-full pt-16">
            <nav class="flex-1 px-4 py-6 space-y-2">
                <!-- Dashboard -->
                <div x-data="{ dashboardOpen: false }">
                    <button @click="dashboardOpen = !dashboardOpen; currentPage = 'dashboard'; sidebarOpen = false"
                           :class="currentPage === 'dashboard' ? 'bg-blue-50 text-blue-700 border-r-2 border-blue-700' : 'text-gray-700 hover:bg-gray-100'"
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors">
                        <i class="fas fa-tachometer-alt mr-3 w-5"></i>
                        <span class="flex-1 text-left">Dashboard</span>
                        <i :class="dashboardOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="dashboardOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'dashboard-quick'; sidebarOpen = false"
                           :class="currentPage === 'dashboard-quick' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-bolt mr-2 text-xs"></i>Quick Akses
                        </a>
                    </div>
                </div>

                <!-- Buat Surat -->
                <div x-data="{ buatSuratOpen: false }">
                    <button @click="buatSuratOpen = !buatSuratOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
                           x-show="['admin', 'user'].includes(userRole)">
                        <i class="fas fa-plus-circle mr-3 w-5"></i>
                        <span class="flex-1 text-left">Buat Surat</span>
                        <i :class="buatSuratOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="buatSuratOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <div x-data="{ buatSuratKeluarOpen: false }">
                            <button @click="buatSuratKeluarOpen = !buatSuratKeluarOpen; currentPage = 'buat-surat-keluar'; sidebarOpen = false"
                                   :class="currentPage === 'buat-surat-keluar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors">
                                <i class="fas fa-file-alt mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Buat Surat Keluar</span>
                                <i :class="buatSuratKeluarOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="buatSuratKeluarOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <div class="px-3 py-2 text-xs text-gray-500 italic">
                                    • Menggunakan template surat
                                </div>
                                <div class="px-3 py-2 text-xs text-gray-500 italic">
                                    • Template dipilih melalui dropdown
                                </div>
                                <div class="px-3 py-2 text-xs text-gray-500 italic" x-show="userRole === 'admin'">
                                    • Template dapat ditambah dan dikelola oleh Admin
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agenda Surat -->
                <div x-data="{ agendaOpen: false }">
                    <button @click="agendaOpen = !agendaOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-envelope mr-3 w-5"></i>
                        <span class="flex-1 text-left">Agenda Surat</span>
                        <i :class="agendaOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="agendaOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <!-- Masuk -->
                        <div x-data="{ masukOpen: false }">
                            <button @click="masukOpen = !masukOpen" 
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-envelope-open mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Masuk</span>
                                <i :class="masukOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="masukOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <a href="#" @click="currentPage = 'agenda-masuk-upload'; sidebarOpen = false"
                                   :class="currentPage === 'agenda-masuk-upload' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-upload mr-2 text-xs"></i>Upload berkas surat masuk
                                </a>
                                <a href="#" @click="currentPage = 'agenda-masuk-disposisi'; sidebarOpen = false"
                                   :class="currentPage === 'agenda-masuk-disposisi' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors"
                                   x-show="['admin', 'pimpinan'].includes(userRole)">
                                    <i class="fas fa-tasks mr-2 text-xs"></i>Disposisi surat
                                </a>
                                <a href="#" @click="currentPage = 'agenda-masuk-daftar'; sidebarOpen = false"
                                   :class="currentPage === 'agenda-masuk-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-list mr-2 text-xs"></i>Daftar Surat Masuk
                                </a>
                            </div>
                        </div>

                        <!-- Keluar -->
                        <div x-data="{ keluarOpen: false }">
                            <button @click="keluarOpen = !keluarOpen" 
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-paper-plane mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Keluar</span>
                                <i :class="keluarOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="keluarOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <a href="#" @click="currentPage = 'agenda-keluar-upload'; sidebarOpen = false"
                                   :class="currentPage === 'agenda-keluar-upload' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-upload mr-2 text-xs"></i>Upload berkas surat keluar
                                </a>
                                <a href="#" @click="currentPage = 'agenda-keluar-daftar'; sidebarOpen = false"
                                   :class="currentPage === 'agenda-keluar-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-list mr-2 text-xs"></i>Daftar Surat Keluar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Arsip -->
                <div x-data="{ arsipOpen: false }">
                    <button @click="arsipOpen = !arsipOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-archive mr-3 w-5"></i>
                        <span class="flex-1 text-left">Arsip</span>
                        <i :class="arsipOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="arsipOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'arsip-register'; sidebarOpen = false"
                           :class="currentPage === 'arsip-register' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-plus-square mr-2 text-xs"></i>Register Arsip
                        </a>
                        <a href="#" @click="currentPage = 'arsip-daftar'; sidebarOpen = false"
                           :class="currentPage === 'arsip-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-list-alt mr-2 text-xs"></i>Daftar Arsip
                        </a>
                    </div>
                </div>

                <!-- Tentang Aplikasi -->
                <div x-data="{ tentangOpen: false }">
                    <button @click="tentangOpen = !tentangOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-info-circle mr-3 w-5"></i>
                        <span class="flex-1 text-left">Tentang Aplikasi</span>
                        <i :class="tentangOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="tentangOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'tentang-info'; sidebarOpen = false"
                           :class="currentPage === 'tentang-info' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-info mr-2 text-xs"></i>Info Penggunaan
                        </a>
                        <a href="#" @click="currentPage = 'tentang-feedback'; sidebarOpen = false"
                           :class="currentPage === 'tentang-feedback' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-comment mr-2 text-xs"></i>Feedback / Kontak / Masukan
                        </a>
                        <a href="#" @click="logout(); sidebarOpen = false"
                           class="block px-3 py-2 text-sm rounded transition-colors text-red-600 hover:bg-red-50">
                            <i class="fas fa-sign-out-alt mr-2 text-xs"></i>Logout
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </aside>

    <!-- Desktop Sidebar -->
    <aside class="hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-30 lg:w-64 lg:bg-white lg:border-r lg:border-gray-200">
        <div class="flex flex-col h-full pt-16">
            <nav class="flex-1 px-4 py-6 space-y-2">
                <!-- Dashboard -->
                <div x-data="{ dashboardOpen: false }">
                    <button @click="dashboardOpen = !dashboardOpen; currentPage = 'dashboard'"
                           :class="currentPage === 'dashboard' ? 'bg-blue-50 text-blue-700 border-r-2 border-blue-700' : 'text-gray-700 hover:bg-gray-100'"
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors">
                        <i class="fas fa-tachometer-alt mr-3 w-5"></i>
                        <span class="flex-1 text-left">Dashboard</span>
                        <i :class="dashboardOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="dashboardOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'dashboard-quick'"
                           :class="currentPage === 'dashboard-quick' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-bolt mr-2 text-xs"></i>Quick Akses
                        </a>
                    </div>
                </div>

                <!-- Buat Surat -->
                <div x-data="{ buatSuratOpen: false }">
                    <button @click="buatSuratOpen = !buatSuratOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
                           x-show="['admin', 'user'].includes(userRole)">
                        <i class="fas fa-plus-circle mr-3 w-5"></i>
                        <span class="flex-1 text-left">Buat Surat</span>
                        <i :class="buatSuratOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="buatSuratOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <div x-data="{ buatSuratKeluarOpen: false }">
                            <button @click="buatSuratKeluarOpen = !buatSuratKeluarOpen; currentPage = 'buat-surat-keluar'"
                                   :class="currentPage === 'buat-surat-keluar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors">
                                <i class="fas fa-file-alt mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Buat Surat Keluar</span>
                                <i :class="buatSuratKeluarOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="buatSuratKeluarOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <div class="px-3 py-2 text-xs text-gray-500 italic">
                                    • Menggunakan template surat
                                </div>
                                <div class="px-3 py-2 text-xs text-gray-500 italic">
                                    • Template dipilih melalui dropdown
                                </div>
                                <div class="px-3 py-2 text-xs text-gray-500 italic" x-show="userRole === 'admin'">
                                    • Template dapat ditambah dan dikelola oleh Admin
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agenda Surat -->
                <div x-data="{ agendaOpen: false }">
                    <button @click="agendaOpen = !agendaOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-envelope mr-3 w-5"></i>
                        <span class="flex-1 text-left">Agenda Surat</span>
                        <i :class="agendaOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="agendaOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <!-- Masuk -->
                        <div x-data="{ masukOpen: false }">
                            <button @click="masukOpen = !masukOpen" 
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-envelope-open mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Masuk</span>
                                <i :class="masukOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="masukOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <a href="#" @click="currentPage = 'agenda-masuk-upload'"
                                   :class="currentPage === 'agenda-masuk-upload' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-upload mr-2 text-xs"></i>Upload berkas surat masuk
                                </a>
                                <a href="#" @click="currentPage = 'agenda-masuk-disposisi'"
                                   :class="currentPage === 'agenda-masuk-disposisi' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors"
                                   x-show="['admin', 'pimpinan'].includes(userRole)">
                                    <i class="fas fa-tasks mr-2 text-xs"></i>Disposisi surat
                                </a>
                                <a href="#" @click="currentPage = 'agenda-masuk-daftar'"
                                   :class="currentPage === 'agenda-masuk-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-list mr-2 text-xs"></i>Daftar Surat Masuk
                                </a>
                            </div>
                        </div>

                        <!-- Keluar -->
                        <div x-data="{ keluarOpen: false }">
                            <button @click="keluarOpen = !keluarOpen" 
                                   class="w-full flex items-center px-3 py-2 text-sm rounded transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-paper-plane mr-2 text-xs"></i>
                                <span class="flex-1 text-left">Keluar</span>
                                <i :class="keluarOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                            </button>
                            <div x-show="keluarOpen" x-cloak x-transition class="ml-6 mt-1 space-y-1">
                                <a href="#" @click="currentPage = 'agenda-keluar-upload'"
                                   :class="currentPage === 'agenda-keluar-upload' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-upload mr-2 text-xs"></i>Upload berkas surat keluar
                                </a>
                                <a href="#" @click="currentPage = 'agenda-keluar-daftar'"
                                   :class="currentPage === 'agenda-keluar-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                                   class="block px-3 py-2 text-sm rounded transition-colors">
                                    <i class="fas fa-list mr-2 text-xs"></i>Daftar Surat Keluar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Arsip -->
                <div x-data="{ arsipOpen: false }">
                    <button @click="arsipOpen = !arsipOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-archive mr-3 w-5"></i>
                        <span class="flex-1 text-left">Arsip</span>
                        <i :class="arsipOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="arsipOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'arsip-register'"
                           :class="currentPage === 'arsip-register' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-plus-square mr-2 text-xs"></i>Register Arsip
                        </a>
                        <a href="#" @click="currentPage = 'arsip-daftar'"
                           :class="currentPage === 'arsip-daftar' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-list-alt mr-2 text-xs"></i>Daftar Arsip
                        </a>
                    </div>
                </div>

                <!-- Tentang Aplikasi -->
                <div x-data="{ tentangOpen: false }">
                    <button @click="tentangOpen = !tentangOpen" 
                           class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-info-circle mr-3 w-5"></i>
                        <span class="flex-1 text-left">Tentang Aplikasi</span>
                        <i :class="tentangOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'" class="text-xs"></i>
                    </button>
                    <div x-show="tentangOpen" x-cloak x-transition class="ml-8 mt-1 space-y-1">
                        <a href="#" @click="currentPage = 'tentang-info'"
                           :class="currentPage === 'tentang-info' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-info mr-2 text-xs"></i>Info Penggunaan
                        </a>
                        <a href="#" @click="currentPage = 'tentang-feedback'"
                           :class="currentPage === 'tentang-feedback' ? 'bg-blue-50 text-blue-700' : 'text-gray-600 hover:bg-gray-50'"
                           class="block px-3 py-2 text-sm rounded transition-colors">
                            <i class="fas fa-comment mr-2 text-xs"></i>Feedback / Kontak / Masukan
                        </a>
                        <a href="#" @click="logout()"
                           class="block px-3 py-2 text-sm rounded transition-colors text-red-600 hover:bg-red-50">
                            <i class="fas fa-sign-out-alt mr-2 text-xs"></i>Logout
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="lg:pl-64 pt-16">
        <div class="px-4 sm:px-6 lg:px-8 py-8">
            <!-- Dashboard Page -->
            <div x-show="currentPage === 'dashboard'" x-cloak class="fade-in">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900">Dashboard</h2>
                    <p class="text-gray-600">Ringkasan statistik kearsipan surat</p>
                </div>

                <!-- Quick Access Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 rounded-lg">
                                <i class="fas fa-envelope text-blue-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-500">Surat Masuk</p>
                                <p class="text-2xl font-bold text-gray-900">24</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 rounded-lg">
                                <i class="fas fa-paper-plane text-green-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-500">Surat Keluar</p>
                                <p class="text-2xl font-bold text-gray-900">18</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 rounded-lg">
                                <i class="fas fa-archive text-purple-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-500">Total Arsip</p>
                                <p class="text-2xl font-bold text-gray-900">142</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale">
                        <div class="flex items-center">
                            <div class="p-3 bg-orange-100 rounded-lg">
                                <i class="fas fa-clock text-orange-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-500">Menunggu Disposisi</p>
                                <p class="text-2xl font-bold text-gray-900">5</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Grafik Surat Masuk/Keluar</h3>
                        <canvas id="letterChart" width="400" height="200"></canvas>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Statistik per Kategori</h3>
                        <canvas id="categoryChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Quick Akses Subpage -->
            <div x-show="currentPage === 'dashboard-quick'" x-cloak class="fade-in">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900">Quick Akses</h2>
                    <p class="text-gray-600">Akses cepat ke fitur-fitur utama</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale cursor-pointer" @click="currentPage = 'buat-surat-keluar'" x-show="['admin', 'user'].includes(userRole)">
                        <div class="text-center">
                            <div class="p-4 bg-blue-100 rounded-full inline-block mb-4">
                                <i class="fas fa-plus-circle text-blue-600 text-2xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Buat Surat Baru</h3>
                            <p class="text-sm text-gray-600">Buat surat keluar dengan template</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale cursor-pointer" @click="currentPage = 'agenda-masuk-upload'">
                        <div class="text-center">
                            <div class="p-4 bg-green-100 rounded-full inline-block mb-4">
                                <i class="fas fa-upload text-green-600 text-2xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Upload Surat Masuk</h3>
                            <p class="text-sm text-gray-600">Upload surat masuk baru</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover-scale cursor-pointer" @click="currentPage = 'arsip-register'">
                        <div class="text-center">
                            <div class="p-4 bg-purple-100 rounded-full inline-block mb-4">
                                <i class="fas fa-archive text-purple-600 text-2xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Register Arsip</h3>
                            <p class="text-sm text-gray-600">Daftarkan dokumen ke arsip</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Placeholder untuk halaman lain -->
            <div x-show="currentPage !== 'dashboard' && currentPage !== 'dashboard-quick'" x-cloak class="fade-in">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center">
                    <i class="fas fa-tools text-6xl text-gray-400 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Halaman Sedang Dikembangkan</h3>
                    <p class="text-gray-600 mb-4">Halaman <span x-text="currentPage" class="font-mono bg-gray-100 px-2 py-1 rounded"></span> sedang dalam pengembangan</p>
                    <button @click="currentPage = 'dashboard'" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i class="fas fa-arrow-left mr-2"></i>Kembali ke Dashboard
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Menu configuration - SESUAI SPESIFIKASI ANDA
        document.addEventListener('alpine:init', () => {
            Alpine.data('app', () => ({
                logout() {
                    if(confirm('Apakah Anda yakin ingin keluar?')) {
                        sessionStorage.removeItem('user');
                        window.location.href = 'login.html';
                    }
                }
            }));

            // Initialize charts when page loads
            document.addEventListener('DOMContentLoaded', function() {
                // Letter Chart
                const letterCtx = document.getElementById('letterChart');
                if(letterCtx) {
                    new Chart(letterCtx, {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                            datasets: [{
                                label: 'Surat Masuk',
                                data: [12, 19, 15, 25, 22, 24],
                                borderColor: 'rgb(59, 130, 246)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4
                            }, {
                                label: 'Surat Keluar',
                                data: [8, 12, 10, 14, 18, 18],
                                borderColor: 'rgb(34, 197, 94)',
                                backgroundColor: 'rgba(34, 197, 94, 0.1)',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                }
                            }
                        }
                    });
                }

                // Category Chart
                const categoryCtx = document.getElementById('categoryChart');
                if(categoryCtx) {
                    new Chart(categoryCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Undangan', 'Edaran', 'Pemberitahuan', 'Pengantar', 'Lainnya'],
                            datasets: [{
                                data: [30, 25, 20, 15, 10],
                                backgroundColor: [
                                    'rgb(59, 130, 246)',
                                    'rgb(34, 197, 94)',
                                    'rgb(168, 85, 247)',
                                    'rgb(251, 146, 60)',
                                    'rgb(107, 114, 128)'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                }
                            }
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
